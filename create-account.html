<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Create your reader account after purchasing Queens &amp; Gods.">
  <meta name="theme-color" content="#1a1814">
  <title>Create Account | Queens &amp; Gods | Edwin C. Polela</title>
  <link rel="icon" type="image/x-icon" href="favicon/favicon.ico">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <header style="position: sticky; top: 0; z-index: 50; border-bottom: 1px solid rgba(224,224,224,0.1); background: rgba(18,18,18,0.95);">
    <nav aria-label="Main navigation" style="max-width: 80rem; margin: 0 auto; padding: 1rem 1.5rem; display: flex; align-items: center; justify-content: space-between;">
      <a href="index.html" style="font-size: 1.25rem; font-weight: 700;">Edwin C. Polela</a>
      <div class="desktop-links" style="display: flex; gap: 2rem;">
        <a href="index.html">Home</a>
        <a href="books.html">Books</a>
        <a href="login.html">Log in</a>
      </div>
      <details class="mobile-menu" style="display: none;">
        <summary class="mobile-trigger" style="padding: 0.5rem; cursor: pointer;" aria-label="Open menu">☰ Menu</summary>
        <div class="mobile-dropdown">
          <a href="index.html" style="display: block; padding: 0.5rem;">Home</a>
          <a href="books.html" style="display: block; padding: 0.5rem;">Books</a>
          <a href="login.html" style="display: block; padding: 0.5rem;">Log in</a>
        </div>
      </details>
    </nav>
  </header>

  <main id="main-content" style="max-width: 28rem; margin: 0 auto; padding: 3rem 1.5rem;">
    <h1 style="text-align: center; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem;">Create Your Account</h1>
    <p id="create-intro" style="text-align: center; color: rgba(224,224,224,0.8); font-size: 0.9375rem; margin-bottom: 2rem;">You need to purchase the book first to create an account. <a href="purchase.html" style="color: var(--gold);">Buy now</a></p>

    <div id="create-form-container" style="display: none;">
      <p style="margin-bottom: 1rem; font-size: 0.875rem; color: rgba(224,224,224,0.8);">Enter a password to finish setting up your account. Use the email from your purchase.</p>
      <form id="create-account-form" style="border: 1px solid rgba(224,224,224,0.1); border-radius: 0.5rem; background: rgba(224,224,224,0.03); padding: 1.5rem;">
        <label for="create-email" style="display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem;">Email</label>
        <input id="create-email" type="email" readonly style="margin-bottom: 1rem; background: rgba(0,0,0,0.2); cursor: not-allowed;" class="input-field">

        <label for="create-password" style="display: block; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem;">Password</label>
        <input id="create-password" type="password" name="password" placeholder="At least 6 characters" minlength="6" required class="input-field" style="margin-bottom: 1rem;">

        <button type="submit" class="btn-primary" style="width: 100%;">Create Account</button>
      </form>
      <div id="create-error" style="display: none; margin-top: 1rem; padding: 0.75rem; background: rgba(220,53,69,0.15); border-radius: 0.375rem; color: #f8a5a5; font-size: 0.875rem;"></div>
          <div id="create-success" style="display: none; margin-top: 1rem; padding: 0.75rem; background: rgba(40,167,69,0.15); border-radius: 0.375rem; color: #90d4a0; font-size: 0.875rem;">Account created. Redirecting to the book…</div>
    </div>

    <div id="create-pending" style="text-align: center; padding: 2rem;">
      <p style="color: rgba(224,224,224,0.7);">Verifying your purchase…</p>
    </div>

    <div id="create-purchase-required" style="display: none; text-align: center; padding: 2rem;">
      <p style="color: rgba(224,224,224,0.9); margin-bottom: 1rem;">You need to purchase the book before creating an account.</p>
      <a href="purchase.html" class="btn-primary">Purchase &amp; Read</a>
    </div>
  </main>

  <footer style="border-top: 1px solid rgba(224,224,224,0.1); padding: 2rem 1.5rem; margin-top: auto;">
    <div style="max-width: 80rem; margin: 0 auto; text-align: center;">
      <p style="margin: 0; font-size: 0.875rem; color: rgba(224,224,224,0.7);">© 2026 Edwin C. Polela. All rights reserved.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
  <script src="js/config.js"></script>
  <script src="js/create-account.js"></script>
  <style>
    @media (max-width: 767px) {
      .desktop-links { display: none !important; }
      .mobile-menu { display: block !important; }
      .mobile-trigger { display: inline-flex !important; }
    }
  </style>
</body>
</html>
